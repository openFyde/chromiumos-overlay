From 9fdb318822206e143e8be453b986c470823dc16d Mon Sep 17 00:00:00 2001
From: Chris McDonald <cjmcdonald@chromium.org>
Date: Fri, 22 Jan 2021 14:27:57 -0800
Subject: [PATCH] CHROMIUM: Fix cross-compilation

Updating cmake-utils.eclass causes this build to break due to an intermediate
binary not being visible on the PATH during compilation. This patch specifies
that the binary should be used from the CWD during the build, which resolves
the issue. This patch needs to be included and carried forward until the
upstream bug is resolved.

Upstream-Bug: https://github.com/KhronosGroup/Vulkan-Loader/issues/249
---
 loader/CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/loader/CMakeLists.txt b/loader/CMakeLists.txt
index d1606f549..a2baca20b 100644
--- a/loader/CMakeLists.txt
+++ b/loader/CMakeLists.txt
@@ -202,7 +202,7 @@ else() # i.e.: Linux
     if(ASSEMBLER_WORKS)
         add_executable(asm_offset asm_offset.c)
         target_link_libraries(asm_offset loader_specific_options)
-        add_custom_command(OUTPUT gen_defines.asm DEPENDS asm_offset COMMAND asm_offset GAS)
+        add_custom_command(OUTPUT gen_defines.asm DEPENDS asm_offset COMMAND ./asm_offset GAS)
         add_custom_target(loader_asm_gen_files DEPENDS gen_defines.asm)
     else()
         if(USE_GAS)
